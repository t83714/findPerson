<script type="text/javascript" src="qtip/jquery.qtip.min.js"></script>
<link rel="stylesheet" type="text/css" href="qtip/jquery.qtip.min.css" />    


<script type="text/javascript">
(function(){
    try{
        jQuery.fn.qtip.defaults['style']['classes']='qtip-light qtip-rounded qtip-shadow';
    }catch(e){}
})();
</script>
 <style>
.barTable{
    width:100%;
    min-width:600px;
    height:220px;
}
.hasPerson {
    background-color:  red;
}
.hasNoPerson {
    background-color:  green;
}
 </style>

<div class="row">
<table style="width:100%">
    <tr>
        <td><%=startDate%></td>
        <td class="text-right"><%=endDate%></td>
    </tr>
</table>
<table class="barTable">
    <tr>
        <% for(let i=0;i<records.length;i++){ %>
        <td 
            id="imgBox_<%=records[i]['id']%>"
            style="width:<%=600/records.length%> px" 
            class="imgTd <%=records[i]['has_person']==1?'hasPerson':'hasNoPerson'%>"
            data-image-url="<%=records[i]['url']%>"
            data-image-id="<%=records[i]['id']%>"
            data-image-timestamp="<%=records[i]['timestamp']%>"
        >
        </td>
        <% } %>
    </tr>
 </table>
 </div>
<script type="text/javascript">
SystemManager(function(){
	jQuery('.imgTd').qtip({
	    content: {
	        text: function(){
                var imgUrl=jQuery(this).data('image-url');
                var timestamp=jQuery(this).data('image-timestamp');
                return '<b>Time Stamp: '+timestamp+'</b>'+
                '<img src="'+imgUrl+'">';
            }
	    },
	    position: {
	    	//at: 'left bottom',
	    	viewport: jQuery(window)
	    },
	    show: {
            solo: '.imgTd',
            delay: 1
	    }
	});
	
});
</script>
</script>